{"version":3,"sources":["counterspell/core.cljs"],"mappings":"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","names":["counterspell.core/with-index","coll","cljs.core.map_indexed","cljs.core/vector","counterspell.core/tiles-to-string","tiles","cljs.core.apply","cljs.core/str","cljs.core.map","counterspell.core/letter-at","grid","x","y","cljs.core.get_in","counterspell.core/letter-values","counterspell.core/score-word","word","cljs.core/+","counterspell.core/game-turns","counterspell.core/grid-rows","counterspell.core/grid-cols","counterspell.core/tile-states","counterspell.core/game-states","p__23581","vec__23582","cljs.core.nth","counterspell.core/neighbors","iter__5480__auto__","s__23586","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","xs__6360__auto__","cljs.core/first","iterys__5476__auto__","s__23588","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","cljs.core/count","b__23590","cljs.core/chunk-buffer","i__23589","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__23587","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","fs__5477__auto__","cljs.core.concat","iter__23585","x'","cljs.core.range","y'","cljs.core._EQ_","cljs.core/set","cljs.core.disj","counterspell.core/random-letter-generator","seed","alphabet","cljs.core/clj->js","generator","js/module$vendor$jsrand","cljs.core.repeatedly","counterspell.core/generate-game-grid","random-seed","height","cljs.core.take","cljs.core.partition","cljs.core.mapv","letters","letter","counterspell.core/init-game","full-grid","starters","p1__23591#","cljs.core.into","reserve","p1__23592#","cljs.core.drop","counterspell.core/state","reagent.core.atom","p__23594","map__23595","cljs.core/--destructure-map","cljs.core.get","counterspell.core/is-selected?","p1__23593#","cljs.core/some","fexpr__23596","cljs.core/deref","counterspell.core/is-legal-selection?","temp__5802__auto__","tail","cljs.core/last","fexpr__23597","G__23599","fexpr__23598","counterspell.core/remove-selected-spaces-from-grid","selected","p__23600","vec__23601","col","cljs.core/second","cljs.core.remove","p__23604","vec__23605","tile","G__23608","counterspell.core/add-tiles-from-reserve","removed","by-col","cljs.core/group-by","s__23611","b__23613","i__23612","iter__23610","needed","extras","p1__23609#","cljs.core.assoc","counterspell.core/remove-tiles-from-reserve","s__23615","b__23617","i__23616","iter__23614","used","counterspell.core/words-by-first-letter","counterspell.words/words","p__23618","vec__23619","k","v","counterspell.core/path-to-word","path","p1__23622#","fexpr__23623","counterspell.core/words-reachable-from","words","G__23626","fexpr__23627","words-vec","cljs.core/vec","to-check","found-words","cljs.core/empty?","word-so-far","partial-word-re","cljs.core/re-pattern","is-full-word?","is-partial-word?","p1__23624#","cljs.core/re-find","unchecked-neighbors","cljs.core/disj","potential-paths","p1__23625#","cljs.core.conj","cljs.core/conj","cljs.core/pop","counterspell.core/run-scoring!","longest-paths-from-each-tile","s__23630","s__23632","b__23634","i__23633","iter__23631","iter__23629","cljs.core.sort_by","cljs.core/>","longest-words-with-paths","cljs.core/nil?","p1__23628#","cljs.core/PersistentVector","cljs.core.swap_BANG_","cljs.core/assoc","counterspell.core/after-advancing-turn!","fexpr__23636","js/setTimeout","old","p1__23635#","cljs.core.partial","cljs.core/mapv","counterspell.core/after-submitting-word!","gone","p1__23637#","fexpr__23638","cljs.core.update","counterspell.core/submit-word!","maybe-word","fexpr__23639","p__23641","map__23642","counterspell.core/tile-action!","selected-grid-space","fexpr__23643","fexpr__23644","new-selected","p1__23640#","cljs.core.take_while","counterspell.core/main","s__23646","b__23648","i__23647","vec__23649","iter__23645","vec__23662","grid-x","fexpr__23675","s__23653","b__23655","i__23654","vec__23656","iter__23652","vec__23659","s__23666","b__23668","i__23667","vec__23669","iter__23665","vec__23672","grid-y","counterspell.core/letter-tile","counterspell.core/word-in-progress","counterspell.core/found-words","p__23676","map__23677","cljs.core.merge","fexpr__23678","fexpr__23679","fexpr__23680","fexpr__23681","s__23683","b__23685","i__23684","iter__23682","fexpr__23686","fexpr__23687","fexpr__23688","s__23690","b__23692","i__23691","iter__23689","fexpr__23693","fexpr__23694","fexpr__23696","js/location","fexpr__23698","js/counterspell","js/counterspell.core","js/counterspell.core.root","counterspell.core/root","reagent.dom.client/create-root","js/document","counterspell.core/init","url-seed","cljs.core/parse-long","or__5002__auto__","cljs.core/rand-int","reagent.dom.client.render","cljs.core/chunk-first"],"sourcesContent":["(ns counterspell.core\n  (:require [reagent.dom.client :as rdom]\n            [reagent.core :as r]\n            [counterspell.words :refer [words]]\n            [\"/vendor/jsrand\" :as jsrand]))\n\n;;\n;; generic helpers\n;;\n(defn with-index [coll] (map-indexed vector coll))\n(defn tiles-to-string [tiles] (apply str (map :letter tiles)))\n(defn letter-at [grid x y] (:letter (get-in grid [x y])))\n\n(def letter-values\n  {\"a\" 1\n   \"b\" 3\n   \"c\" 3\n   \"d\" 2\n   \"e\" 1\n   \"f\" 4\n   \"g\" 2\n   \"h\" 4\n   \"i\" 1\n   \"j\" 8\n   \"k\" 5\n   \"l\" 1\n   \"m\" 3\n   \"n\" 1\n   \"o\" 1\n   \"p\" 3\n   \"q\" 10\n   \"r\" 1\n   \"s\" 1\n   \"t\" 1\n   \"u\" 1\n   \"v\" 4\n   \"w\" 4\n   \"x\" 8\n   \"y\" 4\n   \"z\" 10})\n\n(defn score-word [word]\n  (->> word\n       (map letter-values)\n       (apply +)))\n\n\n;;\n;; initial game data\n;;\n(def game-turns 3)\n;; TODO: how big should the grid be?\n(def grid-rows 7)\n(def grid-cols 6)\n\n(def tile-states #{:default :falling-in})\n(def game-states #{:selecting-tiles :submitting-word :advancing-turn :scoring})\n\n\n(defn neighbors [[x y]]\n  (->\n   (for [x' (range (dec x) (+ 2 x))\n         y' (range (dec y) (+ 2 y))]\n     (when (and (not (= [x y] [x' y']))\n                (<= 0 x')\n                (<= 0 y')\n                (< x' grid-cols)\n                (< y' grid-rows))\n       [x' y']))\n   set\n   (disj nil)))\n\n\n(defn random-letter-generator [seed]\n  (let [alphabet (clj->js \"abcdefghijklmnopqrstuvwxyz\")\n        generator (new jsrand seed)]\n    (repeatedly #(.choice generator alphabet))))\n\n\n(defn generate-game-grid [random-seed]\n  (let [height (* grid-rows (inc game-turns))]\n    (->> (random-letter-generator random-seed)\n         (take (* height grid-cols))\n         (partition height)\n         (mapv (fn [letters]\n                 (mapv (fn [letter]\n                         {:letter letter\n                          :state :default}) letters))))))\n\n\n(defn init-game [random-seed]\n  (let [full-grid (generate-game-grid random-seed)\n        starters (mapv #(into [] (take grid-rows %)) full-grid)\n        reserve (mapv #(into [] (drop grid-rows %)) full-grid)]\n    (def state (r/atom {:grid starters\n                        :random-seed random-seed\n                        :reserve-grid reserve\n                        :game-state :selecting-tiles\n                        :selected-grid-spaces []\n                        :bad-guess? false\n                        :remaining-words []\n                        :found-words []}))))\n\n\n;;\n;; game actions\n;;\n(defn is-selected? [{:keys [x y]}]\n  (some #(and (= x (% :x)) (= y (% :y))) (@state :selected-grid-spaces)))\n\n\n(defn is-legal-selection? [x y]\n  ;; NOTE: this currently assumes the space in question is deselected, because that's handled\n  ;;       further up the chain in tile-action! need to backfill that rule if this function\n  ;;       is to be used in any other context.\n  (if-let [tail (last (@state :selected-grid-spaces))]\n    ((neighbors [(tail :x) (tail :y)]) [x y])\n\n    ;; any space is legal if there are no current selections\n    true))\n\n\n(defn remove-selected-spaces-from-grid [grid selected]\n  (mapv (fn [[x col]]\n          (mapv second\n                (remove (fn [[y tile]]\n                          (selected [x y]))\n                        (with-index col))))\n        (with-index grid)))\n\n\n(defn add-tiles-from-reserve [grid reserve removed]\n  (into []\n        (let [by-col (group-by first removed)]\n          (for [x (range grid-cols)]\n            (let [col (nth grid x)\n                  needed (count (by-col x))\n                  extras (take needed (nth reserve x))]\n              (into []\n                    (concat col\n                            (map #(assoc % :state :falling-in) extras))))))))\n\n(defn remove-tiles-from-reserve [reserve removed]\n  (let [by-col (group-by first removed)]\n    (for [x (range grid-cols)]\n      (let [col (nth reserve x)\n            used (count (by-col x))]\n        (drop used col)))))\n\n\n\n;;\n;; scoring\n;;\n\n(def words-by-first-letter\n  (->> words\n       (group-by first)\n       (map (fn [[k v]] [k (set v)]))\n       (into {})))\n\n(defn path-to-word [path]\n  (apply str (map #(letter-at (@state :grid) (% 0) (% 1)) path)))\n\n\n;; 0. push our starting point onto the to-check queue\n;; while the queue is not empty:\n;;   1. pop a path from the to-check queue\n;;   2. is our path to this point a full word?\n;;      2a. if yes, push that into our \"found words paths\" set. continue on regardless.\n;;   3. is our path to this point a partial word?\n;;      3a. if no, continue on to next entry of queue\n;;      3b. if yes:\n;;        4. look at all neighbors of path's tail\n;;        5. subtract neighbors that are in our path already\n;;        6. put these possible paths on our list of paths to check\n;; finally, return the longest guy in the \"found words paths\" list\n(defn words-reachable-from [x y]\n  (let [words (words-by-first-letter (:letter (get-in (@state :grid) [x y])))\n        words-vec (vec words)]\n    (loop [to-check [[[x y]]]  ;; a queue (vector) of vectors of grid points, each one representing a path through the grid\n           found-words []]\n      (if (empty? to-check)\n        found-words\n        (let [path (last to-check)\n              word-so-far (path-to-word path)\n              partial-word-re (re-pattern (str \"^\" word-so-far))\n              is-full-word? (words word-so-far)\n              is-partial-word? (some #(re-find partial-word-re %) words-vec)\n              unchecked-neighbors (apply disj (neighbors (last path)) path)\n              potential-paths (mapv #(conj path %) unchecked-neighbors)]\n          (recur (if is-partial-word?\n                   (apply conj (pop to-check) potential-paths)     ;; keep searching down this path if it might be a word\n                   (pop to-check))                                 ;; if not, abandon this path and go back to the rest\n                 (if is-full-word?\n                   (conj found-words path)\n                   found-words)))))))\n\n\n(defn run-scoring! []\n  (let [longest-paths-from-each-tile (for [x (range grid-cols)\n                                           y (range grid-rows)]\n                                       (->> (words-reachable-from x y)\n                                            (sort-by count >)\n                                            first))\n        longest-words-with-paths (->> longest-paths-from-each-tile\n                                      (remove nil?)\n                                      (map #(vector (path-to-word %) %)))]\n    (swap! state assoc\n           :remaining-words longest-words-with-paths\n           :game-state :done)))\n\n\n\n  ;; NOTE: this should be called only on a setTimeout, as a next step action after post-word-submit grid update\n(defn after-advancing-turn! []\n  (if (= game-turns (count (@state :found-words)))\n    (do\n      (swap! state assoc :game-state :scoring)\n      (js/setTimeout run-scoring! 1000))\n\n    (swap! state (fn [old]\n                   (-> old\n                       (assoc :game-state :selecting-tiles)\n                       (assoc :grid (mapv (partial mapv #(assoc % :state :default)) (old :grid))))))))\n\n\n\n;; NOTE: this should be called only on a setTimeout, as a next step action after word submit\n(defn after-submitting-word! []\n  (do\n    (swap! state (fn [old]\n                   (let [gone (into #{} (map #(vector (% :x) (% :y)) (@state :selected-grid-spaces)))]\n                     (-> old\n                         (assoc :grid (-> (old :grid)\n                                          (remove-selected-spaces-from-grid gone)\n                                          (add-tiles-from-reserve (old :reserve-grid) gone)))\n                         (assoc :game-state :advancing-turn)\n                         (assoc :selected-grid-spaces [])\n                         (update :reserve-grid remove-tiles-from-reserve gone)))))\n    (js/setTimeout after-advancing-turn! 600)))\n\n\n\n(defn submit-word! []\n  (let [maybe-word (tiles-to-string (@state :selected-grid-spaces))]\n    (if (words maybe-word)\n      (do\n        (swap! state (fn [old]\n                       (-> old\n                           (update :found-words conj maybe-word)\n                           (assoc :game-state :submitting-word))))\n        (js/setTimeout after-submitting-word! 470))\n\n      (swap! state assoc :bad-guess? true))))\n\n\n(defn tile-action! [{:keys [x y tile]}]\n  (let [selected-grid-space {:x x :y y :letter (tile :letter)}]\n    (when (= :selecting-tiles (@state :game-state))\n      (if (is-selected? selected-grid-space)\n        (if (= selected-grid-space (last (@state :selected-grid-spaces)))\n\n          ;; if you click the last selected tile again, submit the word\n          (submit-word!)\n\n          ;; if you click a selected tile in the middle of the chain, revert selection to it\n          (swap! state (fn [old]\n                         (let [new-selected (conj (->> (old :selected-grid-spaces)\n                                                       (take-while #(not (= % selected-grid-space)))\n                                                       (into []))\n                                                  selected-grid-space)]\n                           (assoc old :selected-grid-spaces new-selected\n                                  :bad-guess? false)))))\n\n        (if (is-legal-selection? x y)\n\n          ;; if you click an unselected tile, select it if it's a valid selection!\n          (swap! state (fn [old]\n                         (assoc old\n                                :selected-grid-spaces\n                                (conj (old :selected-grid-spaces) selected-grid-space)\n                                :bad-guess? false)))\n\n          ;; if you click an unselected tile that's *not* a valid selection, deselect all!\n          (swap! state assoc :selected-grid-spaces [] :bad-guess? false))))))\n\n\n;;\n;; UI components\n;;\n\n(declare letter-tile)\n(declare word-in-progress)\n(declare found-words)\n\n\n(defn main []\n  [:div\n   [:h1 \"Counterspell!!!\"]\n   [:div {:style {:display \"flex\"\n                  :flex-direction \"row\"}}\n    [:div\n     [:div {:comment \"the letter grid\"\n            :style {:display \"flex\"}}\n      (for [[grid-x col] (with-index (@state :grid))]\n        [:div {:comment \"one column of tiles\"\n               :key grid-x\n               :style {:background \"blue\"\n                       :display \"flex\"\n                       :flex-direction \"column-reverse\"\n                       :align-items \"center\"}}\n         (for [[grid-y tile] (with-index col)]\n           [letter-tile {:key grid-y\n                         :tile tile\n                         :grid-x grid-x\n                         :grid-y grid-y}])])]\n     [word-in-progress]]\n    [found-words]]])\n\n\n(defn letter-tile [{:keys [tile grid-x grid-y]}]\n  [:div {:comment \"a single letter tile\"\n         :class \"letter-tile\"\n         :style (merge {:padding \"1rem\"\n                        :width \"100%\"}\n                       (if (is-selected? {:x grid-x :y grid-y})\n                         {:border \"1px solid red\"\n                          :background-color \"#fbb\"\n                          :animation (when (= :submitting-word (@state :game-state))\n                                       \"fade-out forwards 0.5s\")}\n                         {:border \"1px solid black\"})\n                       (when (and (= :falling-in (tile :state))\n                                  (= :advancing-turn (@state :game-state)))\n                         {:animation \"0.5s forwards fall-in\"}))\n         :on-click #(tile-action! {:x grid-x :y grid-y :tile tile})}\n   (.toUpperCase (tile :letter))])\n\n\n(defn word-in-progress []\n  (let [maybe-word (tiles-to-string (@state :selected-grid-spaces))]\n    [:div {:comment \"the currently-being-spelled word\"\n           :style {:padding \"1rem\"\n                   :font-size \"200%\"}\n           :class (when (@state :bad-guess?) \"naughty\")}\n     [:h2 maybe-word]]))\n\n\n(defn found-words []\n  [:div {:style {:margin-left \"1rem\"}}\n   [:h2 \"Found words:\"]\n   [:ul\n    (for [word (@state :found-words)]\n      [:li word])]\n   (when (= :scoring (@state :game-state))\n     [:<>\n      [:hr]\n      [:h2 \"Scoring. I didn't code this part very well, so please wait...\"]])\n   (when (= :done (@state :game-state))\n     [:<>\n      [:hr]\n      [:h2 \"Words remaining on board:\"]\n      [:table\n       [:tbody\n        (for [word (map first (@state :remaining-words))]\n          [:tr\n           [:td word]\n           [:td (score-word word)]])]]\n      [:hr]\n      [:h2 \"Final score (lower is better)\"]\n      [:h3 (->> (@state :remaining-words) (map first) (map score-word) (apply +))]\n      [:div\n       [:a {:href (str \"/#\" (@state :random-seed))\n            :on-click #(.reload js/location)} \"Try this board again\"]]\n      [:div\n       [:a {:href \"/\"\n            :on-click #(.reload js/location)} \"Try a new random board\"]]\n      [:div\n       [:a {:href (str \"/#\" (@state :random-seed))}\n        \"Copy this link to challenge someone else to the same board.\"]]])])\n\n\n(defonce root (rdom/create-root (.querySelector js/document \"#root\")))\n\n(defn\n  ^:dev/after-load\n  init\n  []\n  (let [url-seed (->> (.-hash js/location)\n                      (drop 1)\n                      (apply str)\n                      (parse-long))\n        seed (or url-seed (rand-int 10000))]\n    (init-game seed)\n    (rdom/render root [main])))\n"]}